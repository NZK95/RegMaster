> Disclaimer: The information provided here is a collection of research notes and personal observations. Accuracy is not guaranteed.
### Регистры — это быстрые и маленькие ячейки памяти, обычно размером от 8 до 64 бита, расположенные внутри процессора или других компонентов, которые используются для временного хранения данных. Регистры также позволяют управлять логикой работы компонента.
---
#### Что такое регистр?

Регистр — это битмаска, то есть набор битов, где каждый бит или **битфилд** (диапазон битов) выполняет свою функцию отдельно. Регистр может состоять, например, из младших 32 битов (EAX) (0 - 31) и старших 32 битов (EDX) (32 - 64). Рассмотрим пример из документации *Intel MSR*:

<p align="left">
  <img src="https://github.com/NZK95/RegMaster/blob/master/info/images/1.png?raw=true">
</p>

1. Мы можем видеть **оффсет** регистра, то есть его **адрес в памяти** в шестнадцатеричной системе счисления, по которому к нему обращаются, его **имя** и описание **битов**.
2. В примере 2:0 — это **битфилд**, то есть набор из 3-х битов от 0 до 2, который в данном случае отвечает за параметр **Package C-State Limit**.
3. Мы видим, что некоторые битфилды, например 9:3 и 14:11, обозначены как **reserved**, то есть эти биты просто не используются.

---

#### Типы регистров по доступу
> Некоторые регистры могут просто игнорировать запись и даже чтение, записывать а потом сразу же сбрасывать или же просто выкинуть Exception ввиде BSOD.
Регистры могут отличаться по типу доступа:

- **RO (Read-Only)** — только для чтения.
- **RW (Read-Write)** — для чтения и записи.
- **WO (Write-Only)** — только для записи.
- **W1C (Write 1 to Clear)** — запись единицы для сброса флага (используется для сброса флагов ошибок и других признаков).
- **RO, Write Once (WO)** — можно записать только один раз, и потом он блокируется до перезагрузки системы.
- **RW1 (Read-Write, 1-Only Write)** — запись в этот регистр возможна только один раз, в дальнейшем доступ к записи заблокирован.
- **Reserved** -  в этом случае, биты просто не используются.
---

#### Прочие типы регистров

- **Reboot Register** — при записи в этот регистр система немедленно перезагружается.
- **Reset Register** — запись в этот регистр может привести к сбросу всех настроек устройства в начальное состояние.

---

#### Доступ к регистрам из операционной системы
Для записи или чтения регистров из операционной системы, которая работает в пользовательском режиме (Ring 3), необходимо перейти в **kernel mode** (Ring 0). Это возможно с помощью драйверов, таких как **WinRing0**.

